<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8"/>
        <link rel="stylesheet" href="../../../css/tests.css">
        <title>Espacializacion</title>
    </head>

    <body>
        <div class="cell">
            <h1>Head Related Transfer Function</h1>
        </div>
        
        <p> 
            Al viajar hacia nuestro canal auditivo, el sonido sufre diversos cambios por la interacción con nuestra fisonomía, como 
            son las reflexiones con el torso, las orejas y el interior del propio canal auditivo. Estos cambios se pueden modelar mediante
            la función transferencia relacionada con la cabeza (HRTF), la cual actúa como un filtro para el sonido, le realiza cambios
            dependientes de la frecuencia y de la posición de origen del mismo. <br> <br>
            Como los cambios que sufre el sonido dependen de su posición de origen, al cambiar los valores de la HRTF percibimos que
            proviene de un lugar distinto. En este caso se usa la HRTF de la base de datos HUTUBS, que provee valores de la función
            para múltiples posiciones angulares, con un mismo radio. Si estas interesado en aprender más sobre sonido espacial, 
            <a href="https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20010044352.pdf" target="_blank"> este libro de la NASA</a>
            es una gran referencia.
        </p>

        <div class="cell">
            <h2 >Seleccion de las coordenadas</h2>
            <p >
                Seleccionar coordenadas de la HRTF, se buscará la mas cercana.
            </p>
            <b><span>Azimuth: </span></b> <span id="azimuthText">0</span> <span>&deg</span>
            <input type="range" id="azimuth" value="0" min="0" max="360" step="1"></input>
            <b><span>Elevation: </span></b> <span id="elevationText">0</span> <span>&deg</span>
            <input type="range" id="elevation" value="0" min="-90" max="90" step="1"></input>
            <b><span>Radius: </span></b> <span id="radiusText">1</span> <span>m</span>
            <br>
            <p> 
                Si presiona 'Start moving sound', empezará una animación donde el sonido se mueve según una 
                trayectoria predeterminada, y se deja de tener control sobre las coordenadas utilizadas de la HRTF.
            </p>
            <button id="animationButton"> Start moving sound </button>
            <p>
                Presionar 'Stop moving sound' para retomar el control sobre las coordenadas.
            </p>
            <button id="offAnimationButton"> Stop moving sound</button>     
            <br><br>
            <div>
                <button class="play-button" id="playButton"></button>
                <button class="stop-button" id="stopButton"></button>
            </div><br>
            <div>
                <b><span>Volumen: </span></b> <span id="volumeText">100</span> <span>%</span> 
                <input type="range" id="volume" value="100" min="0" max="500" step="1"></input> <br>        
            </div>
        </div>

        <div id="plot" style="text-align:center"><p style="text-align:center">Respuesta impulsiva de cada oído</p></div>

        <p> Si lo desea, puede cargar un archivo WAV de sonido distinto. </p>
        <input type="file" id="wavSelector"></input>
        <p> Abajo aparecerán las grabaciones que se vayan generando a lo largo del programa:</p>
        <ul id="recordings"></ul>
        <script src="../../../modules/recorder.js"></script>
        <script type="module" src="main.js"></script>
    </body>
</html>